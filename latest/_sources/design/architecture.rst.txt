========================
Application architecture
========================

The COFY application designed to be hosted on any cloud platform. Using cloud infrastructure makes the application easily scalable for constellations with many satellites. For a homogeneous constellation, adding a new satellite could be done in a single API call.

The user can interface with the application through the REST API endpoints. Cofy currently only contains a backend infrastructure and it is not envisioned to develop a front-end in the near future. The backend makes it straightforward to integrate cofy into other applications, such as a mission control system.


.. mermaid::

    graph TD
        subgraph Users
            User1
            User2
            User3
        end

        Application

        Database

        FileStorage

        Cache

        subgraph Runners
            Runner1
            Runner2
            Runner3
        end

        User1((User1)) <--> Application
        User2((User2)) <--> Application
        User3((User3)) <--> Application
        Application <--> Database[(SQL\n Database)]
        Application <--> FileStorage[(Large file\n storage)]
        Application <--> Cache
        Cache <--> Runners
        Application --> Runners
        Runners --> FileStorage



REST API Backend
~~~~~~~~~~~~~~~~

The
Asynchronous
Several standard flight dynamics products are computed automatically, such that for nominal operations, no intervention of an operator should be necessary.
## Runners
Cofy makes use of a task queue to manage the different processing requests. This is done for tasks which are computationally intensive such as orbit propagation and orbit determination.

By making use of asynchronous calls and a task list, the application stay responsive, and can accept new requests, without having to wait for previous requests to be completed.

The runners are responsible to complete the computationally heavy requests in the task queue. However, requests which are not blocking the application are immediatly performed by the application and not by the runners.

## Database infrastructure
### External data storage
The external data storage is used to store any kind of flight dynamics products as generated by cofy or any kind of other large binary, text or image file. Examples of data s include the orbit time-series or figures for visualization purpose,

SQL Database
~~~~~~~~~~~~
An SQL database excels in effciently storing structured tabula and relational data. The SQL database in cofy acts as a single source of truth for all flight dynamics related configurations, containing for example the configurations of the satellites and the ground stations.
